/* | https://webnalist.com | v1.0.0 | Copyright (c) 2015 Webnalist Sp. z o.o. All rights reserved. | */
!function(e,t){e.matches=e.matches||e[t+"MatchesSelector"]||function(e){for(var t=this,r=(t.document||t.ownerDocument).querySelectorAll(e),n=0;r[n]&&r[n]!==t;)++n;return r[n]?!0:!1},e.closest=e.closest||function(e){for(var t=this;t;){if(t.matches(e))return t;t=t.parentElement}return null}}(Element.prototype,(this.getComputedStyle&&[].join.call(getComputedStyle(document.documentElement,"")).match(/-(moz|ms|webkit)-/)||[])[1]);var WN=WN||{};WN.Ajax=function(){return{request:function(e){"string"==typeof e&&(e={url:e}),e.url=e.url||"",e.method=e.method||"get",e.data=e.data||{};var t=function(e,t){var r,n=[];for(var a in e)n.push(a+"="+encodeURIComponent(e[a]));return r=n.join("&"),""!=r?t?t.indexOf("?")<0?"?"+r:"&"+r:r:""},r={host:{},process:function(e){var r=this;return this.xhr=null,window.ActiveXObject?this.xhr=new ActiveXObject("Microsoft.XMLHTTP"):window.XMLHttpRequest&&(this.xhr=new XMLHttpRequest),this.xhr&&(this.xhr.onreadystatechange=function(){if(4==r.xhr.readyState&&200==r.xhr.status){var t=r.xhr.responseText;e.json===!0&&"undefined"!=typeof JSON&&(t=JSON.parse(t)),r.doneCallback&&r.doneCallback.apply(r.host,[t,r.xhr])}else 4==r.xhr.readyState&&r.failCallback&&r.failCallback.apply(r.host,[r.xhr]);r.alwaysCallback&&r.alwaysCallback.apply(r.host,[r.xhr])}),"get"==e.method?(this.xhr.open("GET",e.url+t(e.data,e.url),!0),this.setHeaders({"X-Requested-With":"XMLHttpRequest"})):(this.xhr.open(e.method,e.url,!0),this.setHeaders({"X-Requested-With":"XMLHttpRequest","Content-type":"application/x-www-form-urlencoded"})),e.headers&&"object"==typeof e.headers&&this.setHeaders(e.headers),setTimeout(function(){"get"==e.method?r.xhr.send():r.xhr.send(t(e.data))},20),this},done:function(e){return this.doneCallback=e,this},fail:function(e){return this.failCallback=e,this},always:function(e){return this.alwaysCallback=e,this},setHeaders:function(e){for(var t in e)this.xhr&&this.xhr.setRequestHeader(t,e[t])}};return r.process(e)}}}();var WN=WN||{};WN=function(e,t,r){function n(){d(v.articleItemSelector,"click",function(t){var r=t.target.closest(v.articleItemSelector).getAttribute(v.articleUrlAttribute),n=360,a=440,o=screen.width/2-n/2,i=screen.height/2-a/2,c=v.readArticleUrl+"?url="+encodeURIComponent(r),l=["toolbar=no","location=no","directories=no","status=no","menubar=no","scrollbars=yes","resizable=no","copyhistory=no","width="+n,"height="+a,"top="+i,"left="+o];s=e.open(c,null,l.join(",")),s.focus()})}function a(){var e={},t=0,n=function(e){var t=0;for(var r in e)t++;return t};u(v.articleItemSelector).forEach(function(r){var n=r.getAttribute(v.articleUrlAttribute),a=l(v.priceSelector,r);n&&(e["url["+t+"]"]=n,t++),a&&f(a,v.loadingClass)}),n(e)&&r.Ajax.request({url:v.loadPricesUrl,method:"post",data:e}).done(function(e){o(JSON.parse(e))})}function o(e){for(var t in e){var r=v.wrapperSelector+" ["+v.articleUrlAttribute+'="'+t+'"]';u(r).forEach(function(r){var n=l(v.priceSelector,r);n&&(m(n,c(e[t]/100)),p(n,v.loadingClass))})}u(v.wrapperSelector+" ."+v.loadingClass).forEach(function(e){m(e,"--"),p(e,v.loadingClass)})}function i(e,t,r,n,a){var o="\\d(?=(\\d{"+(r||3)+"})+"+(t>0?"\\D":"$")+")",i=e.toFixed(Math.max(0,~~t));return(a?i.replace(".",a):i).replace(new RegExp(o,"g"),"$&"+(n||","))}function c(e){return i(e,2,3," ",",")}var s,l=function(e,r){return(r||t).querySelector(e)},u=function(e,r){return(r||t).querySelectorAll(e)},h=function(e,t,r,n){e.addEventListener(t,r,!!n)},d=function(){var e={},r=function(t){var r=t.target;e[t.type].forEach(function(e){var n=u(e.selector),a=Array.prototype.indexOf.call(n,r.closest(e.selector))>=0;a&&e.handler.call(r,t)})};return function(n,a,o){e[a]||(e[a]=[],h(t.documentElement,a,r,!0)),e[a].push({selector:n,handler:o})}}(),f=function(e,t){e.classList?e.classList.add(t):e.className+=" "+t},p=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")},m=function(e,t){e.innerHTML=t},y=function(e){e=e||{};for(var t=1;t<arguments.length;t++)if(arguments[t])for(var r in arguments[t])arguments[t].hasOwnProperty(r)&&(e[r]=arguments[t][r]);return e},w={readArticleUrl:"https://webnalist.com/articles/read/confirm",loadPricesUrl:"https://webnalist.com/public/merchant/articles/prices.json",articleItemSelector:".wn-item",priceSelector:".wn-price",loadingClass:"wn-loading",articleUrlAttribute:"data-wn-url",wrapperSelector:"",loadPrices:!1},v=r.options=y(w,r.options||{});v.wrapperSelector&&(v.articleItemSelector=v.wrapperSelector+" "+v.articleItemSelector),NodeList.prototype.forEach=Array.prototype.forEach,r.isReady=!1,r.readyFn=r.readyFn||[],r.ready=function(e){r.readyFn.push(e)},r.executeReady=function(){r.isReady=!0;for(var e=r.readyFn,t=0,n=e.length;n>t;t++){var a=e[t];"function"==typeof a&&a()}};var g=e.WN;return r.noConflict=function(){return e.WN===r&&(e.WN=g),r},function(){n(),v.loadPrices&&a()}(),y(r,{formatPrice:c,getArticlesPrices:a})}(window,document,WN);